{
  "info": {
    "name": "Khatabook Ledger API Collection",
    "description": "Complete API collection for Khatabook-style Ledger Application",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "version": "1.0.0"
  },
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{jwt_token}}",
        "type": "string"
      }
    ]
  },
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:3001",
      "type": "string"
    },
    {
      "key": "jwt_token",
      "value": "",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "Authentication",
      "item": [
        {
          "name": "Send OTP",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"phone\": \"+919876543210\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/auth/send-otp",
              "host": ["{{base_url}}"],
              "path": ["auth", "send-otp"]
            }
          },
          "response": []
        },
        {
          "name": "Verify OTP",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"phone\": \"+919876543210\",\n  \"otp\": \"123456\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/auth/verify-otp",
              "host": ["{{base_url}}"],
              "path": ["auth", "verify-otp"]
            }
          },
          "response": []
        },
        {
          "name": "SMS Status",
          "request": {
            "method": "GET",
            "url": {
              "raw": "{{base_url}}/auth/sms-status",
              "host": ["{{base_url}}"],
              "path": ["auth", "sms-status"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Users",
      "item": [
        {
          "name": "Create User",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"John Doe\",\n  \"phone\": \"+919876543210\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/users",
              "host": ["{{base_url}}"],
              "path": ["users"]
            }
          },
          "response": []
        },
        {
          "name": "Get Profile",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/users/profile",
              "host": ["{{base_url}}"],
              "path": ["users", "profile"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Customers (Parties)",
      "item": [
        {
          "name": "Create Customer",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"ABC Company\",\n  \"phone\": \"+919876543210\",\n  \"partyType\": \"Customer\",\n  \"transactionType\": \"payment\",\n  \"transactionAmount\": 5000,\n  \"transactionDescription\": \"Opening balance\",\n  \"addresses\": [\n    {\n      \"type\": \"billing\",\n      \"gstin\": \"22ABCDE1234F1Z5\",\n      \"flatBuildingNumber\": \"123, Main Street\",\n      \"areaLocality\": \"Downtown\",\n      \"pinCode\": \"110001\",\n      \"city\": \"New Delhi\",\n      \"state\": \"Delhi\"\n    },\n    {\n      \"type\": \"shipping\",\n      \"flatBuildingNumber\": \"123, Main Street\",\n      \"areaLocality\": \"Downtown\",\n      \"pinCode\": \"110001\",\n      \"city\": \"New Delhi\",\n      \"state\": \"Delhi\"\n    }\n  ],\n  \"currency\": \"INR\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/customers",
              "host": ["{{base_url}}"],
              "path": ["customers"]
            }
          },
          "response": []
        },
        {
          "name": "Get All Customers",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/customers?page=1&limit=10&search=ABC&partyType=Customer",
              "host": ["{{base_url}}"],
              "path": ["customers"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "10"
                },
                {
                  "key": "search",
                  "value": "ABC"
                },
                {
                  "key": "partyType",
                  "value": "Customer"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get Customer by ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/customers/1",
              "host": ["{{base_url}}"],
              "path": ["customers", "1"]
            }
          },
          "response": []
        },
        {
          "name": "Update Customer",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"ABC Company Updated\",\n  \"phone\": \"+919876543211\",\n  \"partyType\": \"Customer\",\n  \"addresses\": [\n    {\n      \"type\": \"billing\",\n      \"gstin\": \"22ABCDE1234F1Z5\",\n      \"flatBuildingNumber\": \"456, Updated Street\",\n      \"areaLocality\": \"Uptown\",\n      \"pinCode\": \"110002\",\n      \"city\": \"New Delhi\",\n      \"state\": \"Delhi\"\n    }\n  ]\n}"
            },
            "url": {
              "raw": "{{base_url}}/customers/1",
              "host": ["{{base_url}}"],
              "path": ["customers", "1"]
            }
          },
          "response": []
        },
        {
          "name": "Delete Customer",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/customers/1",
              "host": ["{{base_url}}"],
              "path": ["customers", "1"]
            }
          },
          "response": []
        },
        {
          "name": "Create Supplier",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"XYZ Suppliers\",\n  \"phone\": \"+919876543212\",\n  \"partyType\": \"Supplier\",\n  \"addresses\": [\n    {\n      \"type\": \"billing\",\n      \"gstin\": \"33FGHIJ5678K9L2\",\n      \"flatBuildingNumber\": \"789, Supplier Street\",\n      \"areaLocality\": \"Industrial Area\",\n      \"pinCode\": \"110003\",\n      \"city\": \"Gurgaon\",\n      \"state\": \"Haryana\"\n    }\n  ]\n}"
            },
            "url": {
              "raw": "{{base_url}}/customers/suppliers",
              "host": ["{{base_url}}"],
              "path": ["customers", "suppliers"]
            }
          },
          "response": []
        },
        {
          "name": "Get All Suppliers",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/customers/suppliers?page=1&limit=10",
              "host": ["{{base_url}}"],
              "path": ["customers", "suppliers"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "10"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get Customers Only",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/customers/customers-only?page=1&limit=10",
              "host": ["{{base_url}}"],
              "path": ["customers", "customers-only"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "10"
                }
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Transactions",
      "item": [
        {
          "name": "Create Transaction",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"customerId\": 1,\n  \"type\": \"CREDIT\",\n  \"amount\": 5000,\n  \"description\": \"Payment received from customer\",\n  \"invoiceNumber\": \"INV-001\",\n  \"category\": \"Sales\",\n  \"gstNumber\": \"22ABCDE1234F1Z5\",\n  \"items\": [\n    {\n      \"name\": \"Product A\",\n      \"quantity\": 2,\n      \"rate\": 2000,\n      \"amount\": 4000\n    },\n    {\n      \"name\": \"Product B\",\n      \"quantity\": 1,\n      \"rate\": 1000,\n      \"amount\": 1000\n    }\n  ],\n  \"purchaseTerms\": \"Net 30 days\",\n  \"attachments\": [\"invoice.pdf\", \"receipt.jpg\"],\n  \"cGST\": 450,\n  \"sGST\": 450,\n  \"iGST\": 0,\n  \"gstPct\": 18,\n  \"discount\": 100,\n  \"shippingAmount\": 50,\n  \"subTotal\": 5000,\n  \"totalAmount\": 5400,\n  \"documentDate\": \"2024-01-15\",\n  \"method\": \"Bank Transfer\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/transactions",
              "host": ["{{base_url}}"],
              "path": ["transactions"]
            }
          },
          "response": []
        },
        {
          "name": "Get All Transactions",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/transactions?page=1&limit=10&type=CREDIT&minAmount=1000&maxAmount=10000&startDate=2024-01-01&endDate=2024-12-31&customerName=ABC&customerId=1&category=Sales",
              "host": ["{{base_url}}"],
              "path": ["transactions"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "10"
                },
                {
                  "key": "type",
                  "value": "CREDIT"
                },
                {
                  "key": "minAmount",
                  "value": "1000"
                },
                {
                  "key": "maxAmount",
                  "value": "10000"
                },
                {
                  "key": "startDate",
                  "value": "2024-01-01"
                },
                {
                  "key": "endDate",
                  "value": "2024-12-31"
                },
                {
                  "key": "customerName",
                  "value": "ABC"
                },
                {
                  "key": "customerId",
                  "value": "1"
                },
                {
                  "key": "category",
                  "value": "Sales"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get Transaction by ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/transactions/1",
              "host": ["{{base_url}}"],
              "path": ["transactions", "1"]
            }
          },
          "response": []
        },
        {
          "name": "Update Transaction",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"customerId\": 1,\n  \"type\": \"DEBIT\",\n  \"amount\": 3000,\n  \"description\": \"Payment made to supplier\",\n  \"invoiceNumber\": \"BILL-001\",\n  \"category\": \"Purchase\",\n  \"gstNumber\": \"33FGHIJ5678K9L2\",\n  \"items\": [\n    {\n      \"name\": \"Raw Material A\",\n      \"quantity\": 5,\n      \"rate\": 500,\n      \"amount\": 2500\n    },\n    {\n      \"name\": \"Raw Material B\",\n      \"quantity\": 1,\n      \"rate\": 500,\n      \"amount\": 500\n    }\n  ],\n  \"purchaseTerms\": \"Net 15 days\",\n  \"attachments\": [\"bill.pdf\"],\n  \"cGST\": 270,\n  \"sGST\": 270,\n  \"iGST\": 0,\n  \"gstPct\": 18,\n  \"discount\": 0,\n  \"shippingAmount\": 0,\n  \"subTotal\": 3000,\n  \"totalAmount\": 3540,\n  \"documentDate\": \"2024-01-16\",\n  \"method\": \"Cheque\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/transactions/1",
              "host": ["{{base_url}}"],
              "path": ["transactions", "1"]
            }
          },
          "response": []
        },
        {
          "name": "Delete Transaction",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/transactions/1",
              "host": ["{{base_url}}"],
              "path": ["transactions", "1"]
            }
          },
          "response": []
        },
        {
          "name": "Get Transactions by Customer",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/transactions/customer/1?page=1&limit=10",
              "host": ["{{base_url}}"],
              "path": ["transactions", "customer", "1"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "10"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Export Transactions CSV",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/transactions/export/csv?type=CREDIT&startDate=2024-01-01&endDate=2024-12-31",
              "host": ["{{base_url}}"],
              "path": ["transactions", "export", "csv"],
              "query": [
                {
                  "key": "type",
                  "value": "CREDIT"
                },
                {
                  "key": "startDate",
                  "value": "2024-01-01"
                },
                {
                  "key": "endDate",
                  "value": "2024-12-31"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Export Transactions PDF",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/transactions/export/pdf?type=CREDIT&startDate=2024-01-01&endDate=2024-12-31",
              "host": ["{{base_url}}"],
              "path": ["transactions", "export", "pdf"],
              "query": [
                {
                  "key": "type",
                  "value": "CREDIT"
                },
                {
                  "key": "startDate",
                  "value": "2024-01-01"
                },
                {
                  "key": "endDate",
                  "value": "2024-12-31"
                }
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Reports",
      "item": [
        {
          "name": "Create Report",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"reportType\": \"income_statement\",\n  \"title\": \"Monthly Income Statement\",\n  \"description\": \"Income statement for January 2024\",\n  \"filters\": {\n    \"startDate\": \"2024-01-01\",\n    \"endDate\": \"2024-01-31\",\n    \"customerIds\": [1, 2, 3],\n    \"supplierIds\": [4, 5, 6],\n    \"transactionTypes\": [\"CREDIT\", \"DEBIT\"],\n    \"minAmount\": 1000,\n    \"maxAmount\": 50000\n  }\n}"
            },
            "url": {
              "raw": "{{base_url}}/reports",
              "host": ["{{base_url}}"],
              "path": ["reports"]
            }
          },
          "response": []
        },
        {
          "name": "Get All Reports",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/reports?page=1&limit=10",
              "host": ["{{base_url}}"],
              "path": ["reports"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "10"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get Report by ID",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/reports/1",
              "host": ["{{base_url}}"],
              "path": ["reports", "1"]
            }
          },
          "response": []
        },
        {
          "name": "Generate Report",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/reports/1/generate",
              "host": ["{{base_url}}"],
              "path": ["reports", "1", "generate"]
            }
          },
          "response": []
        },
        {
          "name": "Export Report CSV",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/reports/1/export/csv",
              "host": ["{{base_url}}"],
              "path": ["reports", "1", "export", "csv"]
            }
          },
          "response": []
        },
        {
          "name": "Export Report PDF",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/reports/1/export/pdf",
              "host": ["{{base_url}}"],
              "path": ["reports", "1", "export", "pdf"]
            }
          },
          "response": []
        },
        {
          "name": "Delete Report",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/reports/1",
              "host": ["{{base_url}}"],
              "path": ["reports", "1"]
            }
          },
          "response": []
        },
        {
          "name": "Get Customer Ledger",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/reports/customer-ledger/1?startDate=2024-01-01&endDate=2024-12-31",
              "host": ["{{base_url}}"],
              "path": ["reports", "customer-ledger", "1"],
              "query": [
                {
                  "key": "startDate",
                  "value": "2024-01-01"
                },
                {
                  "key": "endDate",
                  "value": "2024-12-31"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get Supplier Ledger",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/reports/supplier-ledger/1?startDate=2024-01-01&endDate=2024-12-31",
              "host": ["{{base_url}}"],
              "path": ["reports", "supplier-ledger", "1"],
              "query": [
                {
                  "key": "startDate",
                  "value": "2024-01-01"
                },
                {
                  "key": "endDate",
                  "value": "2024-12-31"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get Daily Summary",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/reports/summary/daily?startDate=2024-01-01&endDate=2024-01-31",
              "host": ["{{base_url}}"],
              "path": ["reports", "summary", "daily"],
              "query": [
                {
                  "key": "startDate",
                  "value": "2024-01-01"
                },
                {
                  "key": "endDate",
                  "value": "2024-01-31"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get Monthly Summary",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/reports/summary/monthly?startDate=2024-01-01&endDate=2024-12-31",
              "host": ["{{base_url}}"],
              "path": ["reports", "summary", "monthly"],
              "query": [
                {
                  "key": "startDate",
                  "value": "2024-01-01"
                },
                {
                  "key": "endDate",
                  "value": "2024-12-31"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get Yearly Summary",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/reports/summary/yearly?startDate=2024-01-01&endDate=2024-12-31",
              "host": ["{{base_url}}"],
              "path": ["reports", "summary", "yearly"],
              "query": [
                {
                  "key": "startDate",
                  "value": "2024-01-01"
                },
                {
                  "key": "endDate",
                  "value": "2024-12-31"
                }
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "RBAC (Role-Based Access Control)",
      "item": [
        {
          "name": "Check Role",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"role\": \"admin\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/rbac/check-role",
              "host": ["{{base_url}}"],
              "path": ["rbac", "check-role"]
            }
          },
          "response": []
        },
        {
          "name": "Check Permission",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"permission\": \"CUSTOMER_CREATE\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/rbac/check-permission",
              "host": ["{{base_url}}"],
              "path": ["rbac", "check-permission"]
            }
          },
          "response": []
        }
      ]
    }
  ]
}
